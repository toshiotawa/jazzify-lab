# ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼ãƒ¢ãƒ¼ãƒ‰ ãƒžãƒ«ãƒãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ãƒ»çŠ¶æ…‹ç•°å¸¸ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…å®Œäº†

## å®Ÿè£…å†…å®¹

### 1. ãƒžãƒ«ãƒãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ãƒ¢ãƒ¼ãƒ‰
- **æœ€å¤§3ä½“åŒæ™‚å‡ºç¾**: ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã¯æ¨ªä¸¦ã³ï¼ˆAåˆ—ã€Båˆ—ã€Cåˆ—ï¼‰ã«é…ç½®
- **åŒæ™‚æ”»æ’ƒåˆ¤å®š**: ã‚³ãƒ¼ãƒ‰ã‚’æ­£ã—ãæ¼”å¥ã™ã‚‹ã¨è¡¨ç¤ºä¸­ã®å…¨ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã«æ”»æ’ƒå¯èƒ½
- **å€‹åˆ¥HPç®¡ç†**: å„ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ãŒç‹¬ç«‹ã—ãŸHPã¨ã‚²ãƒ¼ã‚¸ã‚’æŒã¤
- **å‹•çš„ã‚¹ãƒãƒ¼ãƒ³**: å€’ã—ãŸãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã®ä»£ã‚ã‚Šã«æ–°ã—ã„ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ãŒå‡ºç¾

### 2. SPã‚²ãƒ¼ã‚¸æ‹¡å¼µ
- **æœ€å¤§å€¤ã‚’3â†’5ã«æ‹¡å¼µ**
- **SPã‚¢ã‚¿ãƒƒã‚¯ç™ºå‹•æ¡ä»¶**: SP5ã§ã‚¹ãƒšã‚·ãƒ£ãƒ«ã‚¢ã‚¿ãƒƒã‚¯ï¼ˆå…¨ä½“æ”»æ’ƒï¼‰
- **ãƒŸã‚¹ã‚¿ãƒƒãƒãƒšãƒŠãƒ«ãƒ†ã‚£**: SPã‚²ãƒ¼ã‚¸ãŒ0ã«ãƒªã‚»ãƒƒãƒˆ

### 3. ãƒŸã‚¹ã‚¿ãƒƒãƒã‚·ã‚¹ãƒ†ãƒ 
- **ãƒŸã‚¹ã‚¿ãƒƒãƒåˆ¤å®š**: è¡¨ç¤ºã‚³ãƒ¼ãƒ‰ã®æ§‹æˆéŸ³ä»¥å¤–ã‚’å¼¾ãã¨ãƒŸã‚¹ã‚¿ãƒƒãƒ
- **ãƒšãƒŠãƒ«ãƒ†ã‚£**: 
  - å…¨æ•µã®æ”»æ’ƒã‚²ãƒ¼ã‚¸ãŒ2ç§’åˆ†é€²ã‚€
  - SPã‚²ãƒ¼ã‚¸ãŒ0ã«ãƒªã‚»ãƒƒãƒˆ
  - ç”»é¢ãŒèµ¤ããƒ•ãƒ©ãƒƒã‚·ãƒ¥

### 4. çŠ¶æ…‹ç•°å¸¸ã‚·ã‚¹ãƒ†ãƒ 
- **ç‚Žå±žæ€§ï¼ˆã‚„ã‘ã©ï¼‰**: ä¸Žãƒ€ãƒ¡ãƒ¼ã‚¸3å‰²ã‚¢ãƒƒãƒ—ï¼ˆ10ç§’é–“ï¼‰
- **æ°·å±žæ€§ï¼ˆã“ãŠã‚Šï¼‰**: æ•µã®æ”»æ’ƒã‚²ãƒ¼ã‚¸é€Ÿåº¦åŠæ¸›ï¼ˆ10ç§’é–“ï¼‰
- **é›·å±žæ€§ï¼ˆã¾ã²ï¼‰**: å—ã‘ã‚‹ãƒ€ãƒ¡ãƒ¼ã‚¸åŠæ¸›ï¼ˆ10ç§’é–“ï¼‰
- **ä»˜ä¸Žç¢ºçŽ‡**: 30%
- **é‡è¤‡ãªã—**: æ—¢å­˜ã®çŠ¶æ…‹ç•°å¸¸ãŒå„ªå…ˆ

### 5. æ•µã®æ–°è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³
- **ãƒ’ãƒ¼ãƒ©ãƒ¼**: å‘³æ–¹ã®HP1/4å›žå¾©ï¼ˆHPãŒ50%ä»¥ä¸‹ã®å‘³æ–¹ã‚’å„ªå…ˆï¼‰
- **é˜²å¾¡**: ðŸ›¡ï¸ã‚·ãƒ¼ãƒ«ãƒ‰è¿½åŠ ï¼ˆæœ€å¤§5å€‹ã€æ¬¡ã®æ”»æ’ƒã‚’ç„¡åŠ¹åŒ–ï¼‰
- **ãƒœã‚¹**: HP2å€ã€æ”»æ’ƒåŠ›2å€

### 6. ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚·ã‚¹ãƒ†ãƒ 
- **HPã‚²ãƒ¼ã‚¸åˆ¶**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰æœ€å¤§HPèª­ã¿è¾¼ã¿
- **ãƒ€ãƒ¡ãƒ¼ã‚¸è¡¨ç¤º**: èµ¤è‰²ã§ãƒ€ãƒ¡ãƒ¼ã‚¸ã€ç·‘è‰²ã§å›žå¾©é‡ã‚’è¡¨ç¤º
- **ã‚·ãƒ¼ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ **: ðŸ›¡ï¸æœ€å¤§5å€‹ã¾ã§ä»˜ä¸Žå¯èƒ½

### 7. ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼é­”æ³•
- **é€šå¸¸é­”æ³•**:
  - ãƒ—ãƒ­ãƒ†ã‚¯ãƒˆ: ã‚·ãƒ¼ãƒ«ãƒ‰1å€‹è¿½åŠ 
- **SPé­”æ³•**:
  - ãƒã‚¤ãƒ‘ãƒ¼ãƒ’ãƒ¼ãƒ«: æœ€å¤§HP50%å›žå¾©
  - ã‚¤ãƒ¼ã‚¸ã‚¹ãƒ—ãƒ­ãƒ†ã‚¯ã‚·ãƒ§ãƒ³: ã‚·ãƒ¼ãƒ«ãƒ‰3å€‹è¿½åŠ 

### 8. ãƒœã‚¹æˆ¦
- **ãƒœã‚¹ã‚¹ãƒ†ãƒ¼ã‚¸**: has_boss=trueã®ã‚¹ãƒ†ãƒ¼ã‚¸
- **ãƒœã‚¹ç‰¹æ€§**: HP2å€ã€æ”»æ’ƒåŠ›2å€ã€æ‹¡å¤§ç¸®å°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

### 9. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ›´æ–°

#### æ–°è¦ã‚«ãƒ©ãƒ è¿½åŠ ï¼ˆfantasy_stagesãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
```sql
ALTER TABLE fantasy_stages 
ADD COLUMN IF NOT EXISTS simultaneous_monsters INTEGER NOT NULL DEFAULT 1 CHECK (simultaneous_monsters >= 1 AND simultaneous_monsters <= 3),
ADD COLUMN IF NOT EXISTS has_boss BOOLEAN NOT NULL DEFAULT false,
ADD COLUMN IF NOT EXISTS has_healer BOOLEAN NOT NULL DEFAULT false,
ADD COLUMN IF NOT EXISTS player_max_hp INTEGER NOT NULL DEFAULT 100,
ADD COLUMN IF NOT EXISTS enemy_min_damage INTEGER NOT NULL DEFAULT 5,
ADD COLUMN IF NOT EXISTS enemy_max_damage INTEGER NOT NULL DEFAULT 15;
```

#### æ–°è¦ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ‡ãƒ¼ã‚¿
- **3-1**: ç‚Žã®è©¦ç·´ï¼ˆ2ä½“åŒæ™‚ã€é€šå¸¸ï¼‰
- **3-2**: æ°·ã®å›žå»Šï¼ˆ2ä½“åŒæ™‚ã€ãƒ’ãƒ¼ãƒ©ãƒ¼å«ã‚€ï¼‰
- **3-3**: é›·ã®å¡”ï¼ˆ3ä½“åŒæ™‚ï¼‰
- **3-4**: é—‡ã®åŸŽï¼ˆ2ä½“åŒæ™‚ã€ãƒœã‚¹æˆ¦ï¼‰
- **3-5**: æœ€çµ‚æ±ºæˆ¦ï¼ˆ1ä½“ã€æœ€å¼·ãƒœã‚¹ï¼‰

## ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ä¸€è¦§

### æ–°è¦ä½œæˆ
1. `supabase/migrations/20250130000000_add_fantasy_multi_monster_and_status_effects.sql`
2. `FANTASY_MODE_UPDATE_SUMMARY.md`ï¼ˆã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

### æ›´æ–°
1. `src/components/fantasy/FantasyGameEngine.tsx`
   - ãƒžãƒ«ãƒãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ç®¡ç†
   - çŠ¶æ…‹ç•°å¸¸ã‚·ã‚¹ãƒ†ãƒ 
   - ãƒŸã‚¹ã‚¿ãƒƒãƒåˆ¤å®š
   - æ–°ã—ã„é­”æ³•ã‚·ã‚¹ãƒ†ãƒ 

2. `src/components/fantasy/FantasyGameScreen.tsx`
   - ãƒžãƒ«ãƒãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼è¡¨ç¤º
   - æ–°UIãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
   - ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼HPã‚²ãƒ¼ã‚¸
   - ã‚·ãƒ¼ãƒ«ãƒ‰è¡¨ç¤º

3. `src/components/fantasy/FantasyPIXIRenderer.tsx`
   - è¤‡æ•°ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ç®¡ç†
   - å€‹åˆ¥ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå‡¦ç†
   - çŠ¶æ…‹ç•°å¸¸ã®è¦–è¦šåŠ¹æžœ

4. `src/components/fantasy/FantasyStageSelect.tsx`
   - æ–°è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒžãƒƒãƒ”ãƒ³ã‚°

## ä½¿ç”¨æ–¹æ³•

1. ãƒžã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ
```bash
npx supabase db push
```

2. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å†èµ·å‹•
```bash
npm run dev
```

3. ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã§æ–°ã—ã„ã‚¹ãƒ†ãƒ¼ã‚¸ï¼ˆ3-1ä»¥é™ï¼‰ã‚’ãƒ—ãƒ¬ã‚¤

## æ³¨æ„äº‹é …

- æ—¢å­˜ã®ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ã«ã¯å½±éŸ¿ãªã—ï¼ˆå¾Œæ–¹äº’æ›æ€§ç¶­æŒï¼‰
- æ–°æ©Ÿèƒ½ã¯æ–°è¦ã‚¹ãƒ†ãƒ¼ã‚¸ã§ã®ã¿æœ‰åŠ¹
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒžã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¿…è¦