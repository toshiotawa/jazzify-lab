/**
 * コードテンプレートシステム
 * 音楽理論的に正しい移調のためのインターバルベースのコード定義
 */

export type ChordQuality = 
  | 'maj' | 'min' | 'aug' | 'dim'
  | '7' | 'maj7' | 'm7' | 'mM7' | 'dim7' | 'aug7' | 'm7b5'
  | '6' | 'm6' | '9' | 'm9' | 'maj9' | '11' | 'm11' | '13' | 'm13'
  | 'sus2' | 'sus4' | '7sus4' | 'add9' | 'madd9';

/**
 * Cルートのコードテンプレート
 * 各コードクオリティをインターバル配列で定義
 * 実音は transpose() で都度生成する
 */
export const CHORD_TEMPLATES: Record<ChordQuality, string[]> = {
  // トライアド
  'maj':    ['1P', '3M', '5P'],
  'min':    ['1P', '3m', '5P'],
  'aug':    ['1P', '3M', '5A'],
  'dim':    ['1P', '3m', '5d'],
  
  // セブンス
  '7':      ['1P', '3M', '5P', '7m'],  // ドミナント7th
  'maj7':   ['1P', '3M', '5P', '7M'],
  'm7':     ['1P', '3m', '5P', '7m'],
  'mM7':    ['1P', '3m', '5P', '7M'],
  'dim7':   ['1P', '3m', '5d', 'd7'],  // 例: Cdim7 -> C, Eb, Gb, Bbb
  'aug7':   ['1P', '3M', '5A', '7m'],
  'm7b5':   ['1P', '3m', '5d', '7m'],  // ハーフディミニッシュ
  
  // シックスス
  '6':      ['1P', '3M', '5P', '6M'],
  'm6':     ['1P', '3m', '5P', '6M'],
  
  // ナインス
  '9':      ['1P', '3M', '5P', '7m', '9M'],
  'm9':     ['1P', '3m', '5P', '7m', '9M'],
  'maj9':   ['1P', '3M', '5P', '7M', '9M'],
  
  // エレブンス・サーティーンス
  '11':     ['1P', '5P', '7m', '9M', '11P'], // 3rdは省略されることが多い
  'm11':    ['1P', '3m', '5P', '7m', '9M', '11P'],
  '13':     ['1P', '3M', '5P', '7m', '9M', '13M'], // 11thは省略
  'm13':    ['1P', '3m', '5P', '7m', '9M', '13M'], // 11thは省略
  
  // サスペンド・アド
  'sus2':   ['1P', '2M', '5P'],
  'sus4':   ['1P', '4P', '5P'],
  '7sus4':  ['1P', '4P', '5P', '7m'],
  'add9':   ['1P', '3M', '5P', '9M'],
  'madd9':  ['1P', '3m', '5P', '9M']
};

/**
 * コード表記のエイリアス（よく使われる別名）
 * これを元にパーサーが正規の ChordQuality に変換する
 */
export const CHORD_ALIASES: Record<string, ChordQuality> = {
  // --- 変更点: より多くのエイリアスに対応 ---
  '': 'maj',
  'M': 'maj',
  'm': 'min',
  'min': 'min',
  '-': 'min',
  'M7': 'maj7',
  'maj7': 'maj7',
  'Δ': 'maj7',
  'Δ7': 'maj7',
  'm7': 'm7',
  'min7': 'm7',
  '-7': 'm7',
  '7': '7',
  'dom7': '7',
  'm7b5': 'm7b5',
  'ø': 'm7b5',
  'dim': 'dim',
  'o': 'dim',
  'dim7': 'dim7',
  'o7': 'dim7',
  'aug': 'aug',
  '+': 'aug',
  'aug7': 'aug7',
  '+7': 'aug7',
  'sus': 'sus4',
  'sus4': 'sus4',
  'sus2': 'sus2',
  'add9': 'add9',
  '6': '6',
  'm6': 'm6',
  '9': '9',
  'm9': 'm9',
  'maj9': 'maj9',
  '11': '11',
  'm11': 'm11',
  '13': '13'
};

// --- 変更点: FANTASY_CHORD_MAP は廃止 ---
/**
 * @deprecated FANTASY_CHORD_MAPは廃止されました。
 * 代わりに chord-utils.ts の getChord() を使用してください。
 * これにより、ハードコーディングされたリストではなく、
 * "DbM7"や"Fxm7b5"のような任意のコードを動的に生成できます。
 */
// export const FANTASY_CHORD_MAP = { ... };